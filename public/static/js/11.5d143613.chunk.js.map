{"version":3,"sources":["pages/Login.tsx","utils/client.ts"],"names":["Login","location","useLocation","history","useHistory","useState","nickname","setNickname","password","setPassword","error","setError","display","flexDirection","value","onChange","e","target","required","label","type","onClick","axios","post","then","data","api_token","localStorage","setItem","push","state","from","pathname","console","log","catch","variant","component","create","baseURL","process","params","getItem"],"mappings":"kOAuCeA,UAlCD,WACV,IAAMC,EAAWC,cACXC,EAAUC,cAFA,EAGgBC,mBAAS,IAHzB,mBAGTC,EAHS,KAGCC,EAHD,OAIgBF,mBAAS,IAJzB,mBAITG,EAJS,KAICC,EAJD,OAKUJ,mBAAS,IALnB,mBAKTK,EALS,KAKFC,EALE,KAqBhB,OACI,kBAAC,IAAD,KACI,8BACI,kBAAC,IAAD,CAAKC,QAAQ,OAAOC,cAAc,UAC9B,kBAAC,IAAD,CAAWC,MAAOR,EAAUS,SAAU,SAACC,GAAD,OAAOT,EAAYS,EAAEC,OAAOH,QAAQI,UAAQ,EAACC,MAAM,UACzF,kBAAC,IAAD,CAAWL,MAAON,EAAUO,SAAU,SAACC,GAAD,OAAOP,EAAYO,EAAEC,OAAOH,QAAQM,KAAK,WAAWF,UAAQ,EAACC,MAAM,eACzG,kBAAC,IAAD,CAAQE,QApBJ,SAACL,GAEjBM,IAAMC,KAAK,QAAS,CAAEf,WAAUF,aAAYkB,MAAK,YAAe,IAAZC,EAAW,EAAXA,KAChD,GAAIA,EAAKC,UAGL,OAFAC,aAAaC,QAAQ,YAAaH,EAAKC,gBACvCvB,EAAQ0B,KAAK5B,EAAS6B,MAAMC,KAAKC,UAGrCrB,EAAS,yCACTsB,QAAQC,IAAIT,MAEbU,OAAM,kBAAIxB,EAAS,6CASoByB,QAAQ,aAAtC,aAGR,kBAAC,IAAD,CAAYA,QAAQ,QAAQC,UAAU,KAAM3B,M,gCCnCxD,qBAEeY,QAAMgB,OAAO,CACxBC,QAASC,6BAETC,OAAO,CACHf,UAAWC,aAAae,QAAQ","file":"static/js/11.5d143613.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Container, Box, TextField, Button, Typography } from \"@material-ui/core\"\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport axios from 'utils/client';\r\n\r\nconst Login = () => {\r\n    const location = useLocation<{from: {pathname: string}}>()\r\n    const history = useHistory();\r\n    const [nickname, setNickname] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const loginHandle = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n\r\n        axios.post('login', { password, nickname }).then(({ data }) => {\r\n            if (data.api_token) {\r\n                localStorage.setItem('api_token', data.api_token)\r\n                history.push(location.state.from.pathname)\r\n                return ;\r\n            }\r\n            setError(\"Błędny login lub hasło\")\r\n            console.log(data);\r\n\r\n        }).catch(()=>setError(\"Błędny login lub hasło\"))\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <form >\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <TextField value={nickname} onChange={(e) => setNickname(e.target.value)} required label=\"Nazwa\" />\r\n                    <TextField value={password} onChange={(e) => setPassword(e.target.value)} type=\"password\" required label=\"Hasło\" />\r\n                    <Button onClick={loginHandle} variant=\"contained\">Zaloguj</Button>\r\n                </Box>\r\n            </form>\r\n            <Typography variant=\"body1\" component=\"p\" >{error}</Typography>\r\n        </Container>\r\n    )\r\n}\r\nexport default Login;","import axios from 'axios';\n\nexport default axios.create({\n    baseURL: process.env.REACT_APP_API_URL,\n    /* other custom settings */\n    params:{\n        api_token: localStorage.getItem('api_token')\n    }\n});\n\n"],"sourceRoot":""}